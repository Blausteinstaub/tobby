<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <title>Tobby</title>
    <style>
        body {
            font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            background-color: #1b1b1b;
        }

        #card-container {
            position: relative;
            width: 300px;
            height: 500px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            margin-bottom: 16px;
        }

        .card {
            color: #fff;
            position: relative;
            width: 100%;
            height: 100%;
            background-color: #1b1b1b;
            border-radius: 10px;
            box-shadow: 40px 40px 80px rgba(0, 0, 0, 1);
            overflow: auto;
            display: flex;
            flex-direction: column;
        }

        .card img {
            flex: 1;
            width: 100%;
            height: 250px;
            max-height: 250px;
            object-fit: cover;
        }

        .card-text {
            padding: 10px;
            text-align: center;
            overflow-wrap: break-word;
        }

        #buttons {
            display: flex;
            justify-content: center;
            width: 320px;
            margin-top: 16px;
            margin-bottom: 10px;
        }

        .button {
            width: 100px;
            height: 100px;
            padding: 10px;
            border: none;
            border-radius: 50%;
            font-size: 50px;
            cursor: pointer;
            margin: 0 8px;
            transition-duration: 1;
            opacity: 1;
            transition: opacity 0.25s ease 0s;      
        }

        .button:hover {
            opacity: 0.85;
        }

        #like-button {
            background-color: #4CAF50;
            color: #fff;
        }

        #dislike-button {
            background-color: #e74c3c;
            color: #fff;
        }

        #logo {
            display: flex;
            justify-items: center;
            margin-top: 0;
            max-height: 20vh;
            margin: 0;
            margin-bottom: 16px;
            margin-top: 8px;
        }
    </style>
</head>

<body>
    <img id="logo" src="imgs/logo.png" alt="Tobby">
    <div id="card-container">
        <div class="card">
            <img src="" alt="Hobby Imsustainability Loading...">
            <div class="card-text">
                <p class="card-text">Loading...</p>
                <a class="card-link" href="loading">Mehr Erfahren</a>
            </div>
        </div>
    </div>

    <div id="buttons">
        <button class="button" id="like-button">üëç</button>
        <button class="button" id="dislike-button">üëé</button>
    </div>
    
    <script>
        const parameters = location.search;
        const cardContainer = document.getElementById('card-container');
        const likeButton = document.getElementById('like-button');
        const dislikeButton = document.getElementById('dislike-button');
        const cardText = document.querySelector('.card-text');
        const cardURL = document.querySelector('.card-link')

        parms = new URLSearchParams(parameters);

        const hobbyData = [
            { image: 'imgs/swim.jpg', difficulty: 2, quantity: 2, cost: 2, indoorOutdoor: 3, sustainability: 3,  text: 'Schwimmsport ist die Aus√ºbung des Schwimmens als sportliche Disziplin. In seiner Grundform wird Schwimmsport als Wettkampf mehrerer Teilnehmer um die Bew√§ltigung einer vorgegebenen Schwimmstrecke in k√ºrzestm√∂glicher Zeit ausgetrsustainabilityn.', url: "https://dlrg.de/" },
            { image: 'imgs/football.jpg', difficulty: 4, quantity: 4, cost: 3, indoorOutdoor: 4, sustainability: 3,  text: 'Fu√üball ist eine Ballsportart, bei der zwei Mannschaften mit dem Ziel gegeneinander antreten, mehr Tore als der Gegner zu erzielen und so das Spiel zu gewinnen.', url: "https://www.ea.com/de-de/games/fifa/fifa-23" },
            { image: 'imgs/tabletennis.jpg', difficulty: 4, quantity: 3, cost: 3, indoorOutdoor: 3, sustainability: 3,  text: 'Tischtennis ist eine gegen Ende des 19. Jahrhunderts in England entstandene Ballsportart. Es handelt sich um eine R√ºckschlagsportart.', url: "https://tischtennis.de/" },
            { image: 'imgs/musicproduction.jpg', difficulty: 5, quantity: 3, cost: 3, indoorOutdoor: 3, sustainability: 3,  text: 'Musikproduktion ist der Herstellungsprozess eines musikalischen Werkes, das meist zur Ver√∂ffentlichung bestimmt ist. Tontr√§ger und Qualit√§tsniveau k√∂nnen sehr stark variieren. Im Fachjargon wird das jeweilige Projekt bzw. Ergebnis oft auch einfach ‚ÄûProduktion‚Äú genannt.', url: "https://www.imsustainability-line.com/" },
            { image: 'imgs/programming.jpg', difficulty: 5, quantity: 3, cost: 3, indoorOutdoor: 3, sustainability: 3,  text: 'Programmierung (von altgriechisch œÄœÅœåŒ≥œÅŒ±ŒºŒºŒ± pr√≥gramma ‚Äû√∂ffentlich und schriftlich bekannt gemachte Nachricht, Befehl‚Äú) bezeichnet die T√§tigkeit, Computerprogramme zu erstellen und wird dem Teilbereich der Softwareentwicklung zugerechnet.', url: "https://de.wikipedia.org/wiki/Programmierung" },
            { image: 'imgs/riding.jpg', difficulty: 4, quantity: 3, cost: 3, indoorOutdoor: 3, sustainability: 3,  text: 'Reiten bezeichnet die Fortbewegung des Menschen auf dem R√ºcken eines Tieres. Dabei kann es sich um Pferde, aber auch um andere Reittiere wie Esel oder Kamele handeln.', url: "https://de.wikipedia.org/wiki/Reiten" },
            { image: 'imgs/fishing.jpg', difficulty: 4, quantity: 1, cost: 4, indoorOutdoor: 5, sustainability: 3,  text: 'Fischerei besch√§ftigt sich mit dem Fangen oder Z√ºchten von Fischen und anderen Wassertieren zur Nahrungsgewinnung. Zu unterscheiden sind die Seefischerei (Hochseefischerei und K√ºstenfischerei) sowie die Binnenfischerei, also die Fischerei in Fl√ºssen, Seen und Teichen. Eine Sonderform der Fischerei ist die Aquakultur.', url: "http://www.deutscher-fischerei-verband.de/" },
            { image: 'imgs/basketball.jpg', difficulty: 1, quantity: 3, cost: 3, indoorOutdoor: 3, sustainability: 3,  text: 'Handball ist eine Sportart, bei der zwei Mannschaften mit je sieben Spielern (sechs Feldspieler und ein Torwart) gegeneinander spielen.', url: "https://de.wikipedia.org/wiki/Handball" },
            { image: 'imgs/mixing-music.jpg', difficulty: 2, quantity: 3, cost: 3, indoorOutdoor: 3, sustainability: 3, text: '‚Äûmixing‚Äú (oder ‚Äûmixdown‚Äú) ist in der Audio-Produktion (Musik, Film, H√∂rspiel, H√∂rbuch usw.) die Zusammenf√ºgung aller analog oder digital bearbeiteten einzelnen Tonspuren zu einer Einheit, dem Summensignal (engl. ‚Äûstem‚Äú). Es handelt sich um den vorletzten Prozess im Tonstudio, dem nur noch das Mastering folgt.', url: "https://de.wikipedia.org/wiki/Abmischung" },
            { image: 'imgs/drawing.jpg', difficulty: 2, quantity: 3, cost: 3, indoorOutdoor: 3, sustainability: 3,  text: 'Eine Zeichnung ist ein Bild, das ein Motiv in vereinfachender Weise mit Linien und Strichen darstellt. Dies unterscheidet Zeichnungen von der Malerei, welche ein Motiv durch den fl√§chenhaften Einsatz von Farben und Tonwerten darstellt.', url: "https://de.wikipedia.org/wiki/Kunst" },
            { image: 'imgs/painting.jpg', difficulty: 3, quantity: 3, cost: 3, indoorOutdoor: 3, sustainability: 3,  text: 'Malerei ist die Kunst, Bilder zu malen. Die Bilder werden Gem√§lde genannt. Die Maltechnik besteht darin, feuchte Farben mittels Pinsel, Spachtel oder anderer Werkzeuge auf einen Malgrund aufzubringen.', url: "https://de.wikipedia.org/wiki/Kunst" },
            { image: 'imgs/writing.jpg', difficulty: 3, quantity: 3, cost: 3, indoorOutdoor: 3, sustainability: 3,  text: 'Schreiben bezeichnet in der √ºbertrsustainabilitynen Bedeutung auch den kreativen Prozess des Verfassens von lyrischen und poetischen Texten.', url: "https://de.wikipedia.org/wiki/Schreiben" }
        ];



        function filterHobbyData() {
            const difficultyParam = parseInt(parms.get('difficulty')) || 0;
            const quantityParam = parseInt(parms.get('quantity')) || 0;
            const costParam = parseInt(parms.get('cost')) || 0;
            const indoorOutdoorParam = parseInt(parms.get('indoorOutdoor')) || 0; 
            const sustainabilityParam = parseInt(parms.get('sustainability')) || 0;

            testData = hobbyData.filter((hobby) => {
              return (
                hobby.difficulty === difficultyParam &&
                hobby.quantity === quantityParam &&
                hobby.cost === costParam &&
                hobby.indoorOutdoor === indoorOutdoorParam &&
                hobby.sustainability === sustainabilityParam
              );
            });

            if (testData.length != 0){
                return testData;
            } else {
                testData = hobbyData.filter((hobby) => {
                    return (
                      hobby.difficulty >= difficultyParam - 1 && hobby.difficulty <= difficultyParam + 1 && 
                      hobby.quantity >= quantityParam - 1 && hobby.quantity <= quantityParam + 1 && 
                      hobby.cost >= costParam - 1 && hobby.cost <= costParam + 1 && 
                      hobby.indoorOutdoor >= indoorOutdoorParam - 1 && hobby.indoorOutdoor <= indoorOutdoorParam + 1 && 
                      hobby.sustainability >= sustainabilityParam - 1 && hobby.sustainability <= sustainabilityParam + 1
                    );
                });
                if(testData.length != 0){
                    return testData;
                } else {
                        alert("Error 2: Es wurde konnte passendes Hobby zugewiesen werden. Du bist nun offiziell Hobbylos.")
                    window.location.href = "https://media.tenor.com/gfjLhfkbNwgAAAAC/computer-sagt-nein-little-britain.gif";
                }
            }
        }

        const resultData = filterHobbyData();

        let currenthobbyIndex = 3;

        likeButton.addEventListener('click', () => {
            window.open(resultData[currenthobbyIndex].url, '_blank');
            swipeCard(true);
        });

        dislikeButton.addEventListener('click', () => {
            swipeCard(false);
        });

        var dislikedCombo = 0;

        function swipeCard(liked) {
            const card = document.querySelector('.card');
            card.style.transform = liked ? 'translateX(100%)' : 'translateX(-100%)';

            setTimeout(() => {
                const nexthobby = resultData[(currenthobbyIndex + 1) % resultData.length];
                card.querySelector('img').src = nexthobby.image;
                cardURL.href = nexthobby.url;
                cardText.querySelector('p').textContent = nexthobby.text;
                currenthobbyIndex = (currenthobbyIndex + 1) % resultData.length;
                card.style.transform = 'translateX(0)';
            }, -1);
            if(liked){
                dislikedCombo=0
                
            };
            
            if(!(liked)){
                dislikedCombo += 1;
            }

            if(dislikedCombo >= 500){
                alert("Ach jetzt hab ich auch keine Ahnung mehr.")
                dislikedCombo = 495;
                document.getElementById("dislike-button").style.cursor = "not-allowed";
                document.getElementById("dislike-button").disabled = 1;
            }
        }
        swipeCard();
    </script>
</body>

</html>